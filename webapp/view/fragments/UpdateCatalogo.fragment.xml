<core:FragmentDefinition
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
    xmlns:form="sap.ui.layout.form">
    
    <Dialog
        title="Modificar Registro"
        contentWidth="500px"
        resizable="true"
        draggable="true">
        
        <content>
            <form:SimpleForm
                editable="true"
                layout="ResponsiveGridLayout"
                labelSpanXL="4"
                labelSpanL="4"
                labelSpanM="4"
                labelSpanS="12">
                
                <form:content>
                    <Label text="ID Sociedad"/>
                    <ComboBox id="updateInputIdSociedad" 
                           selectedKey="{update>/idsociedad}" 
                           items="{catalogs>/sociedades}"
                           editable="true"
                           selectionChange=".onSociedadChange">
                           <core:Item key="{catalogs>idvalor}" text="{catalogs>valor} ({catalogs>idvalor})" />
                    </ComboBox>
                    
                    <Label text="ID CEDI"/>
                    <ComboBox id="updateInputIdCedi" 
                           selectedKey="{update>/idcedi}" 
                           items="{catalogs>/cedis}"
                           editable="true"
                           enabled="{catalogs>/cedisEnabled}">
                           <core:Item key="{catalogs>idvalor}" text="{catalogs>valor} ({catalogs>idvalor})" />
                    </ComboBox>

                    <Label text="ID Etiqueta" required="true"
                           visible="{= ${update>/parent} === true }"/>
                    <Input id="updateInputIdEtiqueta" 
                           value= "{update>/idetiqueta}" 
                           editable="true"
                           visible="{= ${update>/parent} === true }"/>
                    
                    <Label text="Etiqueta" required="true"
                           visible="{= ${update>/parent} === true }"/>
                    <Input id="updateInputEtiqueta" 
                           value= "{update>/etiqueta}"
                           visible="{= ${update>/parent} === true }"/> 
                    
                    <Label text="ID Valor" required="true"
                           visible="{= ${update>/parent} === false }"/>
                    <Input id="updateInputIdValor" 
                           value= "{update>/idvalor}" 
                           editable="true"
                           visible="{= ${update>/parent} === false }"/>

                    <Label text="Valor" required="true"
                           visible="{= ${update>/parent} === false }"/>
                    <Input id="updateInputValor" 
                           placeholder="Ej: Color Rojo" 
                           value= "{update>/valor}"
                           visible="{= ${update>/parent} === false }"/>
                    
                    <Label text="Valor Padre"
                           visible="{= ${update>/parent} === false }"/>
                    <HBox 
                        width="100%" 
                        alignItems="Center" 
                        justifyContent="SpaceBetween"
                        visible="{= ${update>/parent} === false }">
                        <ComboBox
                            id="valComboBoxIdValorPa_2"
                            width="100%"
                            placeholder="Buscar o seleccionar valor padre..."
                            selectionChange=".onValorPadreComboChange"
                            showSecondaryValues="true"
                            selectedKey="{update>/idvalorpa}"
                            items="{valueHelp>/flatItems}">
                            <core:ListItem 
                                key="{valueHelp>idvalor}"
                                text="{valueHelp>valor} ({valueHelp>idvalor})"
                                additionalText="{valueHelp>etiqueta}"/>
                            <layoutData>
                                <FlexItemData growFactor="1" />
                            </layoutData>
                        </ComboBox>
                        <Button
                            icon="sap-icon://value-help"
                            type="Transparent"
                            press=".onOpenValorPadreDialog"
                            tooltip="Abrir ayuda de valor"/>
                        <Button
                            id="valClearButton_2"
                            icon="sap-icon://decline"
                            type="Transparent"
                            visible="false"
                            press=".onClearValorPadre"
                            tooltip="Limpiar selección"/>
                    </HBox>

                    <Label text="Secuencia"/>
                    <Input id="updateInputSecuencia" type="Number" placeholder="0" value= "{update>/secuencia}"/>
                    
                    <Label text="Imagen"/>
                    <Input id="updateInputImagen" placeholder="URL de la imagen" value= "{update>/imagen}"/>
                    
                    <Label text="Ruta"/>
                    <Input id="updateInputRuta" placeholder="Ruta" value= "{update>/ruta}"/>
                    
                    <Label text="Descripción"/>
                    <TextArea
                        id="updateTextAreaDescripcion"
                        rows="3"
                        placeholder="Descripción"
                        value= "{update>/descripcion}"/>    
                    
                </form:content>
            </form:SimpleForm>
        </content>
        
        <beginButton>
            <Button
                text="Guardar"
                type="Emphasized"
                press=".onSaveUpdate"/>
        </beginButton>
        
        <endButton>
            <Button
                text="Cancelar"
                press=".onCloseUpdate"/>
        </endButton>
        
    </Dialog>
    
</core:FragmentDefinition>