<core:FragmentDefinition
    xmlns="sap.m"
    xmlns:core="sap.ui.core">
    
    <Dialog
        id="valorPadreDialog"
        title="Seleccionar Valor Padre"
        contentWidth="600px"
        contentHeight="500px"
        resizable="true"
        draggable="true">
        
        <subHeader>
            <Bar>
                <contentMiddle>
                    <SearchField
                        id="valorPadreSearchField"
                        width="100%"
                        placeholder="Buscar valor..."
                        liveChange=".onSearchValorPadre"/>
                </contentMiddle>
            </Bar>
        </subHeader>
        
        <content>
            <List
                id="valorPadreList"
                mode="SingleSelectMaster"
                includeItemInSelection="true"
                selectionChange=".onSelectValorPadreFromDialog"
                items="{valueHelp>/groupedItems}">
                
                <!-- USAR SOLO CustomListItem para TODO -->
                <CustomListItem 
                    type="{= ${valueHelp>isGroup} ? 'Inactive' : 'Active' }"
                    selected="{valueHelp>selected}">
                    
                    <customData>
                        <core:CustomData key="idvalor" value="{valueHelp>idvalor}"/>
                        <core:CustomData key="isGroup" value="{valueHelp>isGroup}"/>
                    </customData>
                    
                    <!-- Contenido condicional -->
                    <VBox width="100%">
                        
                        
                        <VBox 
                            visible="{= ${valueHelp>isGroup} === true }"
                            class="sapUiSmallMarginTopBottom">
                            <Title 
                                text="{valueHelp>etiqueta}" 
                                level="H5"
                                class="sapUiSmallMarginBegin"
                                titleStyle="H5"/>
                        </VBox>
                        
                        
                        <HBox 
                            visible="{= ${valueHelp>isGroup} !== true }"
                            width="100%"
                            alignItems="Center"
                            class="sapUiTinyMarginTopBottom">
                            <VBox width="100%" class="sapUiSmallMarginBegin">
                                <Text 
                                    text="{valueHelp>valor}" 
                                    class="sapUiSmallMarginBottom"/>
                            </VBox>
                        </HBox>
                        
                    </VBox>
                    
                </CustomListItem>
                
            </List>
        </content>
        
        <beginButton>
            <Button
                text="Ninguno"
                type="Transparent"
                press=".onClearValorPadreFromDialog"/>
        </beginButton>
        
        <endButton>
            <Button
                text="Cerrar"
                press=".onCloseValorPadreDialog"/>
        </endButton>
        
    </Dialog>
    
</core:FragmentDefinition>